{"changed":true,"filter":false,"title":"gnuprologsudoku.pl","tooltip":"/gnuprologsudoku.pl","value":":- initialization(main).\n \n \nsolve(Rows) :-\n    maplist(domain_1_9, Rows)\n  , different(Rows)\n  , transpose(Rows,Cols), different(Cols)\n  , blocks(Rows,Blocks) , different(Blocks)\n  , maplist(fd_labeling, Rows)\n  .\n \ndomain_1_9(Rows) :- fd_domain(Rows,1,9).\ndifferent(Rows)  :- maplist(fd_all_different, Rows).\n \nblocks(Rows,Blocks) :-\n    maplist(split3,Rows,Xs), transpose(Xs,Ys)\n  , concat(Ys,Zs), concat_map(split3,Zs,Blocks)\n  . % where\n    split3([X,Y,Z|L],[[X,Y,Z]|R]) :- split3(L,R).\n    split3([],[]).\n \n \n% utils/list\nconcat_map(F,Xs,Ys) :- call(F,Xs,Zs), maplist(concat,Zs,Ys).\n \nconcat([],[]).\nconcat([X|Xs],Ys) :- append(X,Zs,Ys), concat(Xs,Zs).\n \ntranspose([],[]).\ntranspose([[X]|Col], [[X|Row]]) :- transpose(Col,[Row]).\ntranspose([[X|Row]], [[X]|Col]) :- transpose([Row],Col).\ntranspose([[X|Row]|Xs], [[X|Col]|Ys]) :-\n    maplist(bind_head, Row, Ys, YX)\n  , maplist(bind_head, Col, Xs, XY)\n  , transpose(XY,YX)\n  . % where\n    bind_head(H,[H|T],T).\n    bind_head([],[],[]).\n \n \n% tests\ntest([ [_,_,3,_,_,_,_,_,_]\n     , [4,_,_,_,8,_,_,3,6]\n     , [_,_,8,_,_,_,1,_,_]\n     , [_,4,_,_,6,_,_,7,3]\n     , [_,_,_,9,_,_,_,_,_]\n     , [_,_,_,_,_,2,_,_,5]\n     , [_,_,4,_,7,_,_,6,8]\n     , [6,_,_,_,_,_,_,_,_]\n     , [7,_,_,6,_,_,5,_,_]\n     ]).\n \nmain :- \n    close(Str),convertList(L,T), solve(T), maplist(show,T), halt.\n    show(X) :- write(X), nl.\n\n\n\nconvertList( [S11, S12, S13, S14, S15, S16, S17, S18, S19,\n              S21, S22, S23, S24, S25, S26, S27, S28, S29,\n              S31, S32, S33, S34, S35, S36, S37, S38, S39,\n\t\t\t  S41, S42, S43, S44, S45, S46, S47, S48, S49,\n\t\t\t  S51, S52, S53, S54, S55, S56, S57, S58, S59,\n\t\t\t  S61, S62, S63, S64, S65, S66, S67, S68, S69,\n\t\t\t  S71, S72, S73, S74, S75, S76, S77, S78, S79,\n\t\t\t  S81, S82, S83, S84, S85, S86, S87, S88, S89,\n\t\t\t  S91, S92, S93, S94, S95, S96, S97, S98, S99\n\t\t\t  ],L2):- L2 = [\n\t\t\t\t\t\t\t[S11, S12, S13, S14,S15, S16, S17, S18,S19],\n\t\t\t\t\t\t\t[S21, S22, S23, S24,S25, S26, S27, S28,S29],\n\t\t\t\t\t\t    [S31, S32, S33, S34,S35, S36, S37, S38,S39],\n\t\t\t\t\t\t    [S41, S42, S43, S44,S45, S46, S47, S48,S49],\n\t\t\t\t\t\t\t[S51, S52, S53, S54,S55, S56, S57, S58,S59],\n\t\t\t\t\t\t\t[S61, S62, S63, S64,S65, S66, S67, S68,S69],\n\t\t\t\t\t\t\t[S71, S72, S73, S74,S75, S76, S77, S78,S79],\n\t\t\t\t\t\t\t[S81, S82, S83, S84,S85, S86, S87, S88,S89],\n\t\t\t\t\t\t\t[S91, S92, S93, S94,S95, S96, S97, S98,S99]\n\t\t\t\t\t\t\t].\n\t\t\t\t\t\t\t\nread_file(Stream,[]) :-\n    at_end_of_stream(Stream).\n\nread_file(Stream,[X|L]) :-\n    \\+ at_end_of_stream(Stream),\n    read(Stream,X),\n    read_file(Stream,L).","undoManager":{"mark":51,"position":54,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":53,"column":24},"action":"insert","lines":[":- initialization(main)."," "," ","solve(Rows) :-","    maplist(domain_1_9, Rows)","  , different(Rows)","  , transpose(Rows,Cols), different(Cols)","  , blocks(Rows,Blocks) , different(Blocks)","  , maplist(fd_labeling, Rows)","  ."," ","domain_1_9(Rows) :- fd_domain(Rows,1,9).","different(Rows)  :- maplist(fd_all_different, Rows)."," ","blocks(Rows,Blocks) :-","    maplist(split3,Rows,Xs), transpose(Xs,Ys)","  , concat(Ys,Zs), concat_map(split3,Zs,Blocks)","  . % where","    split3([X,Y,Z|L],[[X,Y,Z]|R]) :- split3(L,R).","    split3([],[])."," "," ","% utils/list","concat_map(F,Xs,Ys) :- call(F,Xs,Zs), maplist(concat,Zs,Ys)."," ","concat([],[]).","concat([X|Xs],Ys) :- append(X,Zs,Ys), concat(Xs,Zs)."," ","transpose([],[]).","transpose([[X]|Col], [[X|Row]]) :- transpose(Col,[Row]).","transpose([[X|Row]], [[X]|Col]) :- transpose([Row],Col).","transpose([[X|Row]|Xs], [[X|Col]|Ys]) :-","    maplist(bind_head, Row, Ys, YX)","  , maplist(bind_head, Col, Xs, XY)","  , transpose(XY,YX)","  . % where","    bind_head(H,[H|T],T).","    bind_head([],[],[])."," "," ","% tests","test([ [_,_,3,_,_,_,_,_,_]","     , [4,_,_,_,8,_,_,3,6]","     , [_,_,8,_,_,_,1,_,_]","     , [_,4,_,_,6,_,_,7,3]","     , [_,_,_,9,_,_,_,_,_]","     , [_,_,_,_,_,2,_,_,5]","     , [_,_,4,_,7,_,_,6,8]","     , [6,_,_,_,_,_,_,_,_]","     , [7,_,_,6,_,_,5,_,_]","     ])."," ","main :- test(T), solve(T), maplist(show,T), halt.","show(X) :- write(X), nl."]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":24},"end":{"row":54,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":55,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"insert","lines":["[_, _, _, 6, 7, 8, 9, 1, 2,_, 7, 2, _, 9, 5, 3, 4, 8,_, 9, 8, 3, _, 2, 5, 6, 7, 8, _, 9, 7, 6, _, 4, 2, 3, 4, 2, _, 8, 5, 3, _, 9, 1, 7, 1, 3, _, 2, 4, 8, _, 6, 9, 6, 1, 5, _, 7, 2, 8, _, 2, 8, 7, 4, 1, _, 6, 3, _, 3, 4, 5, 2, 8, 6, _, _, _]",""]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":0},"end":{"row":58,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":0},"end":{"row":77,"column":9},"action":"insert","lines":["convertList( [S11, S12, S13, S14, S15, S16, S17, S18, S19,","              S21, S22, S23, S24, S25, S26, S27, S28, S29,","              S31, S32, S33, S34, S35, S36, S37, S38, S39,","\t\t\t  S41, S42, S43, S44, S45, S46, S47, S48, S49,","\t\t\t  S51, S52, S53, S54, S55, S56, S57, S58, S59,","\t\t\t  S61, S62, S63, S64, S65, S66, S67, S68, S69,","\t\t\t  S71, S72, S73, S74, S75, S76, S77, S78, S79,","\t\t\t  S81, S82, S83, S84, S85, S86, S87, S88, S89,","\t\t\t  S91, S92, S93, S94, S95, S96, S97, S98, S99","\t\t\t  ],L2):- L2 = [","\t\t\t\t\t\t\t[S11, S12, S13, S14,S15, S16, S17, S18,S19],","\t\t\t\t\t\t\t[S21, S22, S23, S24,S25, S26, S27, S28,S29],","\t\t\t\t\t\t    [S31, S32, S33, S34,S35, S36, S37, S38,S39],","\t\t\t\t\t\t    [S41, S42, S43, S44,S45, S46, S47, S48,S49],","\t\t\t\t\t\t\t[S51, S52, S53, S54,S55, S56, S57, S58,S59],","\t\t\t\t\t\t\t[S61, S62, S63, S64,S65, S66, S67, S68,S69],","\t\t\t\t\t\t\t[S71, S72, S73, S74,S75, S76, S77, S78,S79],","\t\t\t\t\t\t\t[S81, S82, S83, S84,S85, S86, S87, S88,S89],","\t\t\t\t\t\t\t[S91, S92, S93, S94,S95, S96, S97, S98,S99]","\t\t\t\t\t\t\t]."]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":0},"end":{"row":56,"column":0},"action":"remove","lines":["[_, _, _, 6, 7, 8, 9, 1, 2,_, 7, 2, _, 9, 5, 3, 4, 8,_, 9, 8, 3, _, 2, 5, 6, 7, 8, _, 9, 7, 6, _, 4, 2, 3, 4, 2, _, 8, 5, 3, _, 9, 1, 7, 1, 3, _, 2, 4, 8, _, 6, 9, 6, 1, 5, _, 7, 2, 8, _, 2, 8, 7, 4, 1, _, 6, 3, _, 3, 4, 5, 2, 8, 6, _, _, _]",""]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":8},"end":{"row":52,"column":9},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":9},"end":{"row":52,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":10},"end":{"row":52,"column":11},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":11},"end":{"row":52,"column":12},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":12},"end":{"row":52,"column":13},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":8},"end":{"row":52,"column":13},"action":"remove","lines":["conve"]},{"start":{"row":52,"column":8},"end":{"row":52,"column":19},"action":"insert","lines":["convertList"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":19},"end":{"row":52,"column":20},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":20},"end":{"row":53,"column":0},"action":"insert","lines":["[_, _, _, 6, 7, 8, 9, 1, 2,_, 7, 2, _, 9, 5, 3, 4, 8,_, 9, 8, 3, _, 2, 5, 6, 7, 8, _, 9, 7, 6, _, 4, 2, 3, 4, 2, _, 8, 5, 3, _, 9, 1, 7, 1, 3, _, 2, 4, 8, _, 6, 9, 6, 1, 5, _, 7, 2, 8, _, 2, 8, 7, 4, 1, _, 6, 3, _, 3, 4, 5, 2, 8, 6, _, _, _]",""]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":0},"end":{"row":53,"column":1},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":1},"end":{"row":54,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":1},"end":{"row":53,"column":2},"action":"insert","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":2},"end":{"row":53,"column":3},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":3},"end":{"row":53,"column":4},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":6},"end":{"row":54,"column":7},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":5},"end":{"row":54,"column":6},"action":"remove","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":4},"end":{"row":54,"column":5},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":3},"end":{"row":54,"column":4},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":2},"end":{"row":54,"column":3},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":1},"end":{"row":54,"column":2},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":4},"end":{"row":54,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":3},"end":{"row":53,"column":4},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":77,"column":9},"end":{"row":78,"column":0},"action":"insert","lines":["",""]},{"start":{"row":78,"column":0},"end":{"row":78,"column":7},"action":"insert","lines":["\t\t\t\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":7},"end":{"row":79,"column":0},"action":"insert","lines":["",""]},{"start":{"row":79,"column":0},"end":{"row":79,"column":7},"action":"insert","lines":["\t\t\t\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":6},"end":{"row":79,"column":7},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":5},"end":{"row":79,"column":6},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":4},"end":{"row":79,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":3},"end":{"row":79,"column":4},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":2},"end":{"row":79,"column":3},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":1},"end":{"row":79,"column":2},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":0},"end":{"row":79,"column":1},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":0},"end":{"row":85,"column":24},"action":"insert","lines":["read_file(Stream,[]) :-","    at_end_of_stream(Stream).","","read_file(Stream,[X|L]) :-","    \\+ at_end_of_stream(Stream),","    read(Stream,X),","    read_file(Stream,L)."]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":8},"end":{"row":54,"column":15},"action":"insert","lines":["open('input.txt',read, Str),","    read_file(Str,L),","    close(Str),"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":27},"end":{"row":54,"column":148},"action":"remove","lines":["[_, _, _, 6, 7, 8, 9, 1, 2,_, 7, 2, _, 9, 5, 3, 4, 8,_, 9, 8, 3, _, 2, 5, 6, 7, 8, _, 9, 7, 6, _, 4, 2, 3, 4, 2, _, 8, 5,"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":27},"end":{"row":54,"column":110},"action":"remove","lines":[" 3, _, 9, 1, 7, 1, 3, _, 2, 4, 8, _, 6, 9, 6, 1, 5, _, 7, 2, 8, _, 2, 8, 7, 4, 1, _"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":28},"end":{"row":54,"column":64},"action":"remove","lines":[" 6, 3, _, 3, 4, 5, 2, 8, 6, _, _, _]"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":27},"end":{"row":54,"column":28},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":27},"end":{"row":55,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":27},"end":{"row":54,"column":28},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":27},"end":{"row":54,"column":28},"action":"remove","lines":["L"]},{"start":{"row":54,"column":27},"end":{"row":54,"column":28},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":0},"end":{"row":55,"column":1},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":1},"end":{"row":55,"column":2},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":2},"end":{"row":55,"column":3},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":3},"end":{"row":55,"column":4},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":0},"end":{"row":53,"column":21},"action":"remove","lines":["    read_file(Str,L),"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":8},"end":{"row":52,"column":36},"action":"remove","lines":["open('input.txt',read, Str),"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":8},"end":{"row":53,"column":0},"action":"remove","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":43},"end":{"row":7,"column":43},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":21,"state":"start","mode":"ace/mode/perl"}},"timestamp":1418878667696}